#### Linux 学习

##### 一、文件系统目录结构

###### 1. 基本理念

* Linux 的文件系统是采用级层式树状目录，在此结构中最上层是根目录"/",然后在此目录下创建其他目录

* 在 Linux 世界，一切皆文件

###### 2. 目录结构

![微信图片_20211225173453.png](https://s2.loli.net/2021/12/25/wyebX2HGKkScDPR.png)

* **/bin**【重点】

> Binary 的缩写，这个目录存放最常使用的命令

* **/sbin**

> s 表示 Super User，存放的是系统管理员使用的系统管理程序

* **/home**【重点】

> 存放普通用户大的主目录，在 Linux 中每个用户都有一个自己的目录，一般以用户账号命名

* **/root**【重点】

> 该目录为系统管理员，也称作超级权限者的用户主目录

* **/lib**

> 系统开机所需要最基本的动态链接共享库，作用类似于windows里的DLL文件，几乎所有的应用程序都要用到这些共享库

* **/lost+Found**

> 一般情况下是空的，当系统非法关机后，这里就存放了一些文件

* **etc**【重点】

> 所有的系统管理所需要的配置文件和子目录

* **usr**【重点】

> 用户很多应用程序和文件都在此目录下，类似于 windows 里的peogram files 目录

* **/boot**【重点】

> 存放的是启动 Linux 时的一些核心文件，包括一些连接文件及镜像文件

* **/proc**

> 该目录为虚拟目录，是系统内存的映射，访问这个目录来获取系统信息，不要随意修改

* **/srv**

> service 的缩写，存放一些服务启动后需要提取的数据，不要随意修改

* **/sys**

> 该目录下安装了2.6内核中新出现的一个文件新系统，不要随意修改

* **/tmp**

> 用于存放一些临时文件

* **/dev**

> 类似于 windows 的设备管理器，把所有的硬件用为文件的形式存储，例如 cpu、硬盘......

* **/media**【重点】

> Linux 系统会自动识别一些设备，例如U盘、光驱等等，识别过后，Linux 会把识别的设备挂载到该目录下

* **/mnt**【重点】

> 系统提供该目录是为了让用户临时挂在别的文件系统，我们可以将外部的存储挂载在 /mnt 上，然后进入该目录就可以产看里面的内容了

* **/opt**【重点】

> 这是给主机额外安装软件所摆放的目录，比如安装 Oracle 数据库就可以放到该目录下，类似于安装包的位置

* **/usr/local**【重点】

> 这是另一个给主机额外安装软件所安装的目录，类似于安装后的软件位置，一般是通过编译源码方式安装的程序

* **/var**【重点】

> 这个目录中存放着不断扩充着的文件，习惯将经常被修改的目录放在该目录下，比如各种日志文件

* **/selinux[security-enhanced linux]**

> SELinux 是一种安全子系统，能控制程序只能访问特定文件

##### 二、vi 和 vim 编辑器

###### 1. vi 和 vim 的三种常见模式

* **正常模式**

> 在正常模式下，可以使用快捷键，比如复制粘贴

* **插入模式/编辑模式**

> 该模式下，可以输入内容，一般来说按 i 进入该模式

* **命令行模式**

> 在此模式下，可以提供你相关指令，完成读取、存盘、替换、离开、显示行号等行为

###### 2. 进入 vi 的命令

* **vi filename**

> 打开或者创建文件，光标置于第一行首

* **vi +n filename**

> 打开文件，光标置于第 n 行首

* **vi + filename**

> 打开文件，光标置于末行首

* **vi -r filename**

> 上次使用 vi 编辑时发生系统崩溃，恢复 filename

* **vi filename....filename**

> 打开多个文件，依次编辑

###### 3. **基础命令**

* **:w**

> 保存当前文件

* **:e filename**

> 打开文件 filename 进行编辑

* **:x**

> 保存当前文件并退出

* **:q**

> 退出 vi

* **:q!**

> 不保存文件并退出 vi

* **!command**

> 执行 shell 命令 command

* r!command

> 将命令 command 的输出结果放到当前行

##### 三、开机、重启和用户登录注销

###### 1. 基本指令介绍

* **shutdown -h now**

> 立刻关机

* **shutdown -h 1**

> 一分钟后关机

* **shutdown -r now**

> 立即重启计算机

* **halt**

> 关机

* **reboot**

> 重启计算机

* **sync**

> 把内存的数据同步到磁盘，关机或重启前注意使用

###### 2. 用户登录和注销

* **基本介绍**

> a. 登录时尽量少用 root 账号登录，因为权限很大；为避免出现操作失误，登录后使用 ''su-用户名'' 命令来切换成系统管理员
> 
> b. 在提示符下输入 logout 即可注销用户

* **使用细节**

> a. logout 注销指令在图形运行级别无效，在运行级别3下有效
> 
> b. 运行级别概念后续介绍

##### 四、用户管理

###### 1. 创建用户指定密码

**用户家目录**：/home/ 目录下有各个创建的用户对于的家目录，用户登录时，会自动进入到自己的家目录

**申请账号**：Linux 是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须向系统管理员申请一个账号，然后以这个账号的身份进入系统

**添加用户**

1. 基本语法

> **useradd 用户名**
> 
> a. 创建目录成功后，会自动创建和目录同名的家目录
> 
> b. 也可以通过 **useradd -d 指定目录 新的用户名**，给创建的用户指定家目录

2. 创建或修改密码

> **passwd 用户名**

##### 2. 删除用户

1. 基本语法

> **userdel 用户名** 
> 
> -- 删除后保留家目录
> 
> **userdel -r 用户名**
> 
> -- 删除用户以及家目录

##### 3. 查询切换用户

1. 用户信息查询

> **id 用户名**
> 
> -- uid：用户 id 号；gid：所在组的 id 号；组：所在组的名称  
> 
> **whoani**
> 
> -- 显示当前处于什么用户下

2. 切换用户

> **su - 用户名**
> 
> a. 从权限高的用户切换到权限低的用户，不需要输入密码，反之需要
> 
> b. 当需要返回到原来的用户时，使用 exit 指令

##### 5. 用户组

1. 创建组

> **groupadd 组名**
> 
> -- 创建一个组

2. 删除组

> **groupdel 组名**
> 
> -- 删除一个组

3. 增加用户时直接加上组

> **useradd -g 用户组 用户名**

4. 修改用户组

> **usermod -g 用户组 用户名**

##### 6. 用户相关配置文件

1. **/etc/passwd**

> 用户（user）的配置文件，记录用户的各种信息

2. **/etc/shadow**

> 口令的配置文件

3. **/etc/group**

> 组的配置文件

#### 五、实用指令

###### 1. 运行级别和找回 root 密码

1. 用 init 切换运行级别

> init 0：关机
> 
> init 1：单用户模式
> 
> init 2：多用户状态没有网络服务
> 
> init 3：多用户状态有网络服务
> 
> init 4：系统未使用保留给用户
> 
> init 5：图形界面
> 
> init 6：重启

2. 找回 root 密码

> 1. 进入单用户模式
> 
> 2. 在单用户模式下更改 root 密码

###### 2. 帮助指令

* **man**

> 功能描述，获得帮助指令

* **help**

> 功能描述，获得 shell 内置命令的帮助信息

###### 3. 文件目录类指令

* **pwd**

> 显示当前工作目录绝对路径

* **ls [选项]**

> 选项：目录或是文件
> 
> -a：显示当前目录所有的文件和目录，包括隐藏的
> 
> -l：以列表的方式显示信息

* **cd**

> 注意绝对路径和相对路径

* **mkdir**

> mkdir /home/dog 创建一级目录
> 
> mkdir -p /home/animal/dog 创建多级目录

* **rmdir**

>  删除空目录，文件有内容时不能删除

* **rm -rf**

> 删除非空目录 rm -rf /home/dog

* **touch**

> 创建一个空文件 touch hello.txt
> 
> 也可以一次性创建多个文件

* **cp**

> 1. 拷贝单个文件
> 
> ![](https://www.hualigs.cn/image/61cd6f2eca914.jpg)
> 
> 2. 拷贝整个目录
> 
> ![](https://www.hualigs.cn/image/61cd7255a7c1c.jpg)
